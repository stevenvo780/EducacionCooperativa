"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2846],{2846:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var r=n(3827),d=n(4090),a=n(1233),u=n(4013),c=n(9978),o=n(1221),s=n(4690);function l(e){let{initialContent:t="",roomId:n}=e,[l,i]=(0,d.useState)(t);(0,d.useEffect)(()=>{if(!n)return;let e=(0,s.JU)(o.db,"documents",n),r=(0,s.cf)(e,n=>{if(n.exists()){var r;let e=n.data();void 0!==e.content&&e.lastUpdatedBy!==(null===(r=o.I8.currentUser)||void 0===r?void 0:r.uid)&&i(e.content)}else(0,s.pl)(e,{content:t,createdAt:(0,s.Bt)(),updatedAt:(0,s.Bt)()})});return()=>r()},[n,t]);let f=(0,d.useCallback)(async e=>{if(i(e),!n)return;let t=(0,s.JU)(o.db,"documents",n);try{var r;await (0,s.pl)(t,{content:e,updatedAt:(0,s.Bt)(),lastUpdatedBy:null===(r=o.I8.currentUser)||void 0===r?void 0:r.uid},{merge:!0})}catch(e){console.error("Error updating document:",e)}},[n]);return(0,r.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,r.jsx)(a.ZP,{value:l,height:"calc(100vh - 100px)",extensions:[(0,u.markdown)({base:u.markdownLanguage,codeLanguages:c.M})],onChange:f,theme:"dark"})})}}}]);