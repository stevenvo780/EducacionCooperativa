(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{2827:function(e,t,n){Promise.resolve().then(n.bind(n,7736))},7736:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(3827),s=n(4090),r=n(8628);function i(){let{user:e}=(0,r.a)(),[t,n]=(0,s.useState)(""),[i,c]=(0,s.useState)([]),[l,o]=(0,s.useState)(!0),u=async t=>{if(e){o(!0);try{let n=await e.getIdToken(),a=await fetch("/api/files?path=".concat(encodeURIComponent(t)),{headers:{Authorization:"Bearer ".concat(n)}});if(a.ok){let e=await a.json();c(e.items||[])}else console.error("Failed to fetch files")}catch(e){console.error(e)}finally{o(!1)}}};(0,s.useEffect)(()=>{e&&u(t)},[e,t]);let d=e=>{n(t?"".concat(t,"/").concat(e):e)};return e?(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Dashboard de Archivos"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4 bg-gray-100 p-2 rounded",children:[(0,a.jsx)("button",{onClick:()=>n(""),className:"text-blue-600 hover:underline",children:"Inicio"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{className:"font-mono text-sm",children:t}),(0,a.jsx)("button",{onClick:()=>{if(!t)return;let e=t.split("/");e.pop(),n(e.join("/"))},className:"ml-auto px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300",children:"Atr\xe1s"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow min-h-[400px]",children:l?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Cargando..."}):0===i.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-400",children:"Carpeta vac\xeda"}):(0,a.jsx)("ul",{className:"divide-y divide-gray-100",children:i.map((e,t)=>(0,a.jsxs)("li",{className:"p-4 hover:bg-gray-50 flex items-center gap-3 cursor-pointer",onClick:()=>"folder"===e.type?d(e.name):null,children:[(0,a.jsx)("span",{className:"text-xl",children:"folder"===e.type?"\uD83D\uDCC1":"\uD83D\uDCC4"}),(0,a.jsx)("span",{className:"flex-1 font-medium text-gray-700",children:e.name}),"file"===e.type&&(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[(e.size/1024).toFixed(1)," KB"]})]},t))})})]}):(0,a.jsx)("div",{className:"p-8",children:"Please log in."})}},8628:function(e,t,n){"use strict";n.d(t,{H:function(){return u},a:function(){return o}});var a=n(3827),s=n(4090),r=n(1936),i=n(1221),c=n(7907);let l=(0,s.createContext)({user:null,loading:!0,signInWithGoogle:async()=>{},logout:async()=>{}}),o=()=>(0,s.useContext)(l),u=e=>{let{children:t}=e,[n,o]=(0,s.useState)(null),[u,d]=(0,s.useState)(!0),f=(0,c.useRouter)();(0,s.useEffect)(()=>{let e=(0,r.Aj)(i.I8,e=>{o(e),d(!1)});return()=>e()},[]);let h=async()=>{try{await (0,r.rh)(i.I8,i.Vv),f.push("/")}catch(e){console.error("Login failed",e)}},x=async()=>{try{await (0,r.w7)(i.I8),f.push("/login")}catch(e){console.error("Logout failed",e)}};return(0,a.jsx)(l.Provider,{value:{user:n,loading:u,signInWithGoogle:h,logout:x},children:t})}},1221:function(e,t,n){"use strict";n.d(t,{I8:function(){return u},Vv:function(){return f},db:function(){return d}});var a=n(6142),s=n(1936),r=n(2180),i=n(4690),c=n(9079);let l={apiKey:c.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyAO4u2_Hlgj2j0I7ZeF8IUEAcK6xK9tq_w",authDomain:c.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"udea-filosofia.firebaseapp.com",projectId:c.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"udea-filosofia",storageBucket:c.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"udea-filosofia.firebasestorage.app",messagingSenderId:c.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"578238159459",appId:c.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:578238159459:web:ac6bc631e907cb594ab656",measurementId:c.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-11X68SESP9"},o=(0,a.C6)().length>0?(0,a.Mq)():(0,a.ZF)(l),u=(0,s.v0)(o);(0,r.cF)(o);let d=(0,i.ad)(o),f=new s.hJ}},function(e){e.O(0,[287,5117,9029,2971,8069,1744],function(){return e(e.s=2827)}),_N_E=e.O()}]);