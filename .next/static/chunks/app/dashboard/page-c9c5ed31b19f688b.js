(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{2827:function(e,t,a){Promise.resolve().then(a.bind(a,7736))},7736:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(3827),s=a(4090),r=a(9158);function l(){let{user:e}=(0,r.a)(),[t,a]=(0,s.useState)(""),[l,i]=(0,s.useState)([]),[c,o]=(0,s.useState)(!0),u=async t=>{if(e){o(!0);try{let a=await e.getIdToken(),n=await fetch("/api/files?path=".concat(encodeURIComponent(t)),{headers:{Authorization:"Bearer ".concat(a)}});if(n.ok){let e=await n.json();i(e.items||[])}else console.error("Failed to fetch files")}catch(e){console.error(e)}finally{o(!1)}}};(0,s.useEffect)(()=>{e&&u(t)},[e,t]);let d=e=>{a(t?"".concat(t,"/").concat(e):e)};return e?(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Dashboard de Archivos"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-4 bg-gray-100 p-2 rounded",children:[(0,n.jsx)("button",{onClick:()=>a(""),className:"text-blue-600 hover:underline",children:"Inicio"}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"/"}),(0,n.jsx)("span",{className:"font-mono text-sm",children:t}),(0,n.jsx)("button",{onClick:()=>{if(!t)return;let e=t.split("/");e.pop(),a(e.join("/"))},className:"ml-auto px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300",children:"Atr\xe1s"})]})]}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow min-h-[400px]",children:c?(0,n.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Cargando..."}):0===l.length?(0,n.jsx)("div",{className:"p-8 text-center text-gray-400",children:"Carpeta vac\xeda"}):(0,n.jsx)("ul",{className:"divide-y divide-gray-100",children:l.map((e,t)=>(0,n.jsxs)("li",{className:"p-4 hover:bg-gray-50 flex items-center gap-3 cursor-pointer",onClick:()=>"folder"===e.type?d(e.name):null,children:[(0,n.jsx)("span",{className:"text-xl",children:"folder"===e.type?"\uD83D\uDCC1":"\uD83D\uDCC4"}),(0,n.jsx)("span",{className:"flex-1 font-medium text-gray-700",children:e.name}),"file"===e.type&&(0,n.jsxs)("span",{className:"text-xs text-gray-400",children:[(e.size/1024).toFixed(1)," KB"]})]},t))})})]}):(0,n.jsx)("div",{className:"p-8",children:"Please log in."})}},9158:function(e,t,a){"use strict";a.d(t,{H:function(){return m},a:function(){return p}});var n=a(3827),s=a(4090),r=a(1936),l=a(6142),i=a(2180),c=a(9079);let o={apiKey:c.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyAO4u2_Hlgj2j0I7ZeF8IUEAcK6xK9tq_w",authDomain:c.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"udea-filosofia.firebaseapp.com",projectId:c.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"udea-filosofia",storageBucket:c.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"udea-filosofia.firebasestorage.app",messagingSenderId:c.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"578238159459",appId:c.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:578238159459:web:ac6bc631e907cb594ab656",measurementId:c.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-11X68SESP9"},u=(0,l.C6)().length>0?(0,l.Mq)():(0,l.ZF)(o),d=(0,r.v0)(u);(0,i.cF)(u);let h=new r.hJ;var f=a(7907);let x=(0,s.createContext)({user:null,loading:!0,signInWithGoogle:async()=>{},logout:async()=>{}}),p=()=>(0,s.useContext)(x),m=e=>{let{children:t}=e,[a,l]=(0,s.useState)(null),[i,c]=(0,s.useState)(!0),o=(0,f.useRouter)();(0,s.useEffect)(()=>{let e=(0,r.Aj)(d,e=>{l(e),c(!1)});return()=>e()},[]);let u=async()=>{try{await (0,r.rh)(d,h),o.push("/")}catch(e){console.error("Login failed",e)}},p=async()=>{try{await (0,r.w7)(d),o.push("/login")}catch(e){console.error("Logout failed",e)}};return(0,n.jsx)(x.Provider,{value:{user:a,loading:i,signInWithGoogle:u,logout:p},children:t})}}},function(e){e.O(0,[5117,9601,2971,8069,1744],function(){return e(e.s=2827)}),_N_E=e.O()}]);